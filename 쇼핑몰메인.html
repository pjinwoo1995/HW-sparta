<html>
<head>
	<title>
		나의 쇼핑몰
	</title>
	<!-- bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

	<!-- JS -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

	<script>
		// 전역변수 선언
		function input_check(){
			let phone_number_split = $('#phone_number_input').val()
			//이름부터 순서대로 검증 시작
			if ($('#name_input').val() == ''){
				alert('이름을 입력하세요')
				document.getElementById('name_input').focus();
			} 
			//이름 입력 완료

			else if($('#inputGroupSelect01 option:selected').val() == 0) {
				alert('수량을 선택하세요')
				document.getElementById('inputGroupSelect01').focus();
			} 
			//수량 선택 완료

			else if ($('#address_input').val() == ''){
				alert('주소를 입력하세요')
				document.getElementById('address_input').focus();
			}
			//주소 입력 완료
			else if($('#phone_number_input').val() == ''){
				alert('전화번호를 입력하세요')
				document.getElementById('phone_number_input').focus();
			}

			//전화번호 입력 완료

			else if((phone_number_split.split('-') == -1)||(phone_number_split.split('-').length != 3)){
				alert('잘못된 전화번호입니다. 전화번호는 010-xxxx-xxxx 꼴로 입력하세요.')
			}
			//전화번호 형태 맞음

			else if((phone_number_split.split('-')[0] != '010') || (phone_number_split.split('-')[1].length != 4) || (phone_number_split.split('-')[2].length != 4)){
				alert('잘못된 전화번호입니다. 전화번호는 010-xxxx-xxxx 꼴로 입력하세요.')
			}
			// 전화번호 각 자리수 맞음

			else if((isNaN(phone_number_split.split('-')[0]) != false) || (isNaN(phone_number_split.split('-')[1]) != false) || (isNaN(phone_number_split.split('-')[2]) != false)){
				alert('잘못된 전화번호입니다. 전화번호는 010-xxxx-xxxx 꼴로 입력하세요.')
			}
			else {
				alert('good!')
			}
		}

		$( document ).ready(function listing(){
			$.ajax({
				type: "GET",
				url: "http://spartacodingclub.shop/order",
				data: {},
				success: function(response){
					console.log(response)
					let orders = response['orders'];
					for (let i = 0 ; i < orders.length; i++){
						let address = orders[i]['address'];
						let count = orders[i]['count'];
						let name = orders[i]['name'];
						let phone = orders[i]['phone'];

						let temp_html = '<tr>\
						<th scope="row">'+name+'</th>\
						<td>'+count+'</td>\
						<td>'+address+'</td>\
						<td>'+phone+'</td>\
						</tr>'
						$('#order_table').append(temp_html);


					}
				}
			})
		})
	</script>

	<style>
		.wrap {
			width: 900;
			margin: 25px auto 25px auto;
		}

		.pot-picture{
			display: flex;
			flex-direction: column;
			align-items: center;
			padding: 15px 0px 30px 0px;
		}

		.item-name {
			margin: 0px 0px 15px 0px;
		}

		.price-notice {
			font-size: 30px;
			margin: 10px 0px 15px 0px;
		}

		.item-explain {
			font size: 15px;
			margin: 10px 0px 15px 0px;
		}

		.order-btn {
			display:flex;
			align-items: center;
		}

	</style>
</head>
<body>
	<div class="wrap">

		<a class="pot-picture" href="url">
			<img src="http://thumbnail.10x10.co.kr/webimage/image/add1_600/193/A001930161_01.jpg?cmd=thumb&w=500&h=500&fit=true&ws=false" border="0">
		</a>

		<div class="item-name">
			<h1>화분을 팝니다 <span class="price-notice"> 3000원/개</span></h1>
		</div>
		<div class="item-explain">
			미세먼지가 많아진 요즘입니다. 화분 하나로 인테리어와 실내 공기까지 산뜻하게 바꿔 보는건 어떨까요?
		</div>

		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<span class="input-group-text" id="basic-addon1">주문자 이름</span>
			</div>
			<input id="name_input" type="text" class="form-control" placeholder="주문자 이름" aria-label="Username" aria-describedby="basic-addon1">
		</div>

		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<label class="input-group-text" for="inputGroupSelect01">수량
				</label>
			</div>
			<select class="custom-select" id="inputGroupSelect01">
				<option value="0">최대 3개까지 선택 가능합니다</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
			</select>
		</div>

		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<span class="input-group-text" id="basic-addon1">주소</span>
			</div>
			<input id="address_input" type="text" class="form-control" placeholder="주소" aria-label="Username" aria-describedby="basic-addon1">
		</div>

		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<span class="input-group-text" id="basic-addon1">전화번호</span>
			</div>
			<input id="phone_number_input" type="text" class="form-control" placeholder="전화번호" aria-label="Username" aria-describedby="basic-addon1">
		</div>

		<div class="text-center"style="float:none; margin:0 auto">
			<button onclick="input_check()" type="button" class="btn btn-primary order">주문하기</button>
		</div>

		<table class="table" style="margin: 30px auto auto auto;">
			<thead>
				<tr>
					<th scope="col">이름</th>
					<th scope="col">수량</th>
					<th scope="col">주소</th>
					<th scope="col">전화번호</th>
				</tr>
			</thead>
			<tbody id="order_table">
				
			</tbody>
		</table>

	</div>
</body>
</html>